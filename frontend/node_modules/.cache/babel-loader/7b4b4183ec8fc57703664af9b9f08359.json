{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Programa\\xE7\\xE3o_Projetos\\\\Pitu-SAAS-LuizTools\\\\frontend\\\\src\\\\pages\\\\StatsPage\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Container, Spinner } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { parseISO, formatRelative } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR'; //prettier-ignore\n\nimport { StatsContainer, StatsRow, StatsBox, StatsBoxTitle } from './styles';\nimport Header from '../../components/Header';\nimport shortenerService from '../../services/shortenerService';\n\nfunction StatsPage(props) {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [shortenedURL, setShortenedURL] = useState({});\n  const [errorMessage, setErrorMessage] = useState(''); // com Promises\n  // useEffect(() => {\n  //   setIsLoading(true);\n  //   shortenerService\n  //     .getLink(props.match.params.code)\n  //     .then((response) => {\n  //       setShortenedURL(response);\n  //       setIsLoading(false);\n  //     })\n  //     .catch((_) => {\n  //       setIsLoading(false);\n  //       setErrorMessage('Ops, A URL solicitada não existe.');\n  //     });\n  // }, [props.match.params.code]);\n  // com Async Await\n\n  useEffect(() => {\n    async function getShortenedURL() {\n      try {\n        setIsLoading(true);\n        const shortenedURL = await shortenerService.getStats(props.match.params.code);\n        const parsedDate = parseISO(shortenedURL.updatedAt);\n        const currentDate = new Date();\n        const relativeDate = formatRelative(parsedDate, currentDate, {\n          locale: ptBR\n        });\n        shortenedURL.relativeDate = relativeDate;\n        setShortenedURL(shortenedURL);\n        setIsLoading(false);\n      } catch (_) {\n        setIsLoading(false);\n        setErrorMessage('Ops, A URL solicitada não existe.');\n      }\n    }\n\n    getShortenedURL();\n  }, [props.match.params.code]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: \"Estat\\xEDsticas:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), errorMessage ? /*#__PURE__*/_jsxDEV(StatsContainer, {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        size: \"3x\",\n        color: \"#f8d7da\",\n        icon: \"faExclamationTriangle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"m-3\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn btn-primary\",\n        href: \"/\",\n        children: \"Encutar nova URL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(StatsContainer, {\n      className: \"text-center\",\n      children: isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this) : shortenedURL && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"http://localhost:3000/\", shortenedURL.code]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Redireciona para: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 37\n          }, this), shortenedURL.url]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(StatsRow, {\n          children: [/*#__PURE__*/_jsxDEV(StatsBox, {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: shortenedURL.hits\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(StatsBoxTitle, {\n              children: \"Visitas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(StatsBox, {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: shortenedURL.relativeDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(StatsBoxTitle, {\n              children: \"\\xDAltima visita\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn btn-primary\",\n          href: \"/\",\n          children: \"Encutar nova URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StatsPage, \"EZ/uBk5b+coHWEooR2FdCTPRTQk=\");\n\n_c = StatsPage;\nexport default StatsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StatsPage\");","map":{"version":3,"sources":["D:/Programação_Projetos/Pitu-SAAS-LuizTools/frontend/src/pages/StatsPage/index.js"],"names":["React","useState","useEffect","Container","Spinner","FontAwesomeIcon","parseISO","formatRelative","ptBR","StatsContainer","StatsRow","StatsBox","StatsBoxTitle","Header","shortenerService","StatsPage","props","isLoading","setIsLoading","shortenedURL","setShortenedURL","errorMessage","setErrorMessage","getShortenedURL","getStats","match","params","code","parsedDate","updatedAt","currentDate","Date","relativeDate","locale","_","url","hits"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Spinner } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { parseISO, formatRelative } from 'date-fns';\r\nimport ptBR from 'date-fns/locale/pt-BR';\r\n\r\n//prettier-ignore\r\nimport { StatsContainer, StatsRow, StatsBox, StatsBoxTitle } from './styles';\r\nimport Header from '../../components/Header';\r\nimport shortenerService from '../../services/shortenerService';\r\n\r\nfunction StatsPage(props) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [shortenedURL, setShortenedURL] = useState({});\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // com Promises\r\n  // useEffect(() => {\r\n  //   setIsLoading(true);\r\n  //   shortenerService\r\n  //     .getLink(props.match.params.code)\r\n  //     .then((response) => {\r\n  //       setShortenedURL(response);\r\n  //       setIsLoading(false);\r\n  //     })\r\n  //     .catch((_) => {\r\n  //       setIsLoading(false);\r\n  //       setErrorMessage('Ops, A URL solicitada não existe.');\r\n  //     });\r\n  // }, [props.match.params.code]);\r\n\r\n  // com Async Await\r\n  useEffect(() => {\r\n    async function getShortenedURL() {\r\n      try {\r\n        setIsLoading(true);\r\n        const shortenedURL = await shortenerService.getStats(\r\n          props.match.params.code\r\n        );\r\n        const parsedDate = parseISO(shortenedURL.updatedAt);\r\n\r\n        const currentDate = new Date();\r\n        const relativeDate = formatRelative(parsedDate, currentDate, {\r\n          locale: ptBR,\r\n        });\r\n\r\n        shortenedURL.relativeDate = relativeDate;\r\n\r\n        setShortenedURL(shortenedURL);\r\n        setIsLoading(false);\r\n      } catch (_) {\r\n        setIsLoading(false);\r\n        setErrorMessage('Ops, A URL solicitada não existe.');\r\n      }\r\n    }\r\n    getShortenedURL();\r\n  }, [props.match.params.code]);\r\n\r\n  return (\r\n    <Container>\r\n      <Header>Estatísticas:</Header>\r\n      {errorMessage ? (\r\n        <StatsContainer className=\"text-center\">\r\n          <FontAwesomeIcon\r\n            size=\"3x\"\r\n            color=\"#f8d7da\"\r\n            icon=\"faExclamationTriangle\"\r\n          />\r\n          <p className=\"m-3\">{errorMessage}</p>\r\n          <a className=\"btn btn-primary\" href=\"/\">\r\n            Encutar nova URL\r\n          </a>\r\n        </StatsContainer>\r\n      ) : (\r\n        <StatsContainer className=\"text-center\">\r\n          {isLoading ? (\r\n            <Spinner animation=\"border\" />\r\n          ) : (\r\n            shortenedURL && (\r\n              <>\r\n                <p>\r\n                  <b>http://localhost:3000/{shortenedURL.code}</b>\r\n                </p>\r\n                <p>\r\n                  Redireciona para: <br />\r\n                  {shortenedURL.url}\r\n                </p>\r\n                <StatsRow>\r\n                  <StatsBox>\r\n                    <b>{shortenedURL.hits}</b>\r\n                    <StatsBoxTitle>Visitas</StatsBoxTitle>\r\n                  </StatsBox>\r\n                  <StatsBox>\r\n                    <b>{shortenedURL.relativeDate}</b>\r\n                    <StatsBoxTitle>Última visita</StatsBoxTitle>\r\n                  </StatsBox>\r\n                </StatsRow>\r\n                <a className=\"btn btn-primary\" href=\"/\">\r\n                  Encutar nova URL\r\n                </a>\r\n              </>\r\n            )\r\n          )}\r\n        </StatsContainer>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default StatsPage;\r\n"]},"metadata":{},"sourceType":"module"}